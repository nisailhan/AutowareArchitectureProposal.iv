# Behavior Path Planner



# Purpose / Use cases

The `behavior_path_planner` module is responsible for path generation based on traffic rules and map information. Depending on the situation, a sutable module is selected and executed on the behavior tree system.

The following modules are currently supported:
 
 - **Lane Following**: Generate lane centerline from map.
 - **Lane Change**: Performs a lane change. This module is performed when it is necessary and a collision check with other vehicles is cleared.
 - **Obstacle Avoidance**: Perform an obstacle avoidance. This module is for avoidance of a vehicle parked on the edge of the lane or overtaking a low-speed obstacle.
 - **Side Shift**: (For remote control) Shift the path to left or right according to an external instruction.

# Design


<!-- ## Assumptions / Known limits -->


## Inputs / Outputs / API



#### output
 * path [`autoware_planning_msgs/PathWithLaneId`] : The path generated by modules.
 * path_candidate [`autoware_planning_msgs/Path`] : The path the module is about to take. To be executed as soon as external approval is obtained.
 * turn_signal_cmd [`autoware_vehicle_msgs/TurnSignal`] : Turn signal command.
 * force_available [`autoware_planning_msgs/PathChangeModuleArray`] : (For remote control) modules that are force-executable.
 * ready_module [`autoware_planning_msgs/PathChangeModule`] : (For remote control) modules that are ready to be executed.
 * running_modules [`autoware_planning_msgs/PathChangeModuleArray`] : (For remote control) Current running module.


#### input
 * /planning/mission_planning/route [`autoware_planning_msgs/Route`] : Current route from start to goal.
 * /map/vector_map [autoware_lanelet2_msgs/MapBin] : Map information.
 * /perception/object_recognition/objects [`autoware_perception_msgs/DynamicObjectArray`] : dynamic objects from perception module.
 * /tf [`tf2_msgs/TFMessage`] : For ego-pose.
 * /localization/twist [`geometry_msgs/TwistStamped] : For ego-velocity.
 * path_change_approval [`std_msgs::Bool`] : (For remote control) 
 * path_change_force [`autoware_planning_msgs::PathChangeModule`] : (For remote control) 



## Inner-workings / Algorithms

[WIP]

...

# References / External links

This module depends on the external [BehaviorTreeCpp](https://github.com/BehaviorTree/BehaviorTree.CPP) library.

# Future extensions / Unimplemented parts

 -


# Related issues

 - 
